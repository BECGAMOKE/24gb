ПРОмедуслуги: Оценка качества медицинских услуг
=========================================

Cancel changes

Система собирает и классифицирует сообщения, касающиеся медицины Томской области.

## Структура «ядра» системы

* Набор парсеров. Парсеры по заданному времени посещают определённые сайты и собирают с них всю текстовую информацию. Все новые тексты (не содержащиеся в БД) сохраняются для дальнейшей обработки.
* Текстовый классификатор (модель ИИ), который определяет, относится ли текст к медицинской тематике: парсеры собирают все доступные тексты по заданным ссылкам, оставить же нужно лишь релевантные тексты.
* Определитель тональности текста (модель ИИ). Разделяет тексты на три категории: «нейтральный», «положительный», «отрицательный».
* Определитель медучреждения, к которому относится текст. На данный момент это реализовано в виде регулярных выражений, но в ходе тестирования системы наберётся датасет для создания модели ИИ: она будет работать более гибко и немного быстрее, нежели поиск соответствий по регулярным выражениям.
* Вывод сформированных данных пользователю. Реализован на фреймворке Flask.


## Модели ИИ

Модели реализованы с помощью пакета для NLP flair, использующего фреймворк Torch. Тип применённых нейросетей - Bidirectional GRU. В качестве эмбеддинга используется Byte Pair Embedding. Для анализа тональности дополнительно был использован эмбеддинг от FastText.

## Метрики моделей

### Классификатор

* f1-score: 0.9638. Accuracy: 0.9302.

### Определитель тональности

* Для категории «нейтральный». Accuracy: 0.6420. f1-score: 0.7820.
* Для категории «отрицательный». Accuracy: 0.7099. f1-score: 0.8303.
* Для категории «положительный». Accuracy: 0.7668. f1-score: 0.8681.

После тестирования системы модели будут переобучены на новых, более качественных данных, что приведёт к улучшению их качества. Также, если будут позволять ресурсы системы, можно дообучать модели автоматически на новых данных.

## Используемое ПО
Код реализован на языке Python 3.7. В качестве базы данных можно использовать любую открытую реляционную базу данных.

В ходе реализации проекта были использованы открытые программные пакеты: beautifulsoup4, flair, Flask, newspaper3k, pymystem3, vk-api и др.

Полный список пакетов и зависимостей расположен в файле requirements.txt.


Установка
---------

    git clone git@git.asi.ru:shatalin.ip/medical-services-quality.git
    cd medical-services-quality
    pip install virtualenv
    python venv env
    source env/bin/activate
    cp .env.example .env
    pip install -r requirements.txt

Создание миграций БД:

    flask db init
    flask db migrate
    flask db upgrade

Тестовый запуск:
    
    flask run

Для выполнения асинхронных методов:

    python worker.py
 



